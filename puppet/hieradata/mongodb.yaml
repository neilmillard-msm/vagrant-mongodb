---
classes:
  - role::mongodb
#mongodb::server::dbpath: '/mnt/mongodb'
#mongodb::server::logpath: '/mnt/mongodb/mongod.log'
mongodb::globals::version: "3.2.10-1.el7"
mongodb::server::createpidfile: false
mongodb::server::storage_engine: "wiredTiger"
mongodb::repo::repo_location: 'https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/'
mongodb::globals::manage_package_repo: true


mongodb::domain: "mongodb.internal"

profile::mongodb_replset::mongodb_replset_name: "mongodb"
profile::mongodb_replset::members:
  - "x1.%{hiera('mongodb::domain')}:27017":
  - "x2.%{hiera('mongodb::domain')}:27017":
  - "x3.%{hiera('mongodb::domain')}:27017":
    priority: 0
    hidden: 'true'
    votes: 2

# cant use syslog and logpath
#mongodb::server::syslog: true
mongodb::server::dbpath: "/var/lib/mongo"
mongodb::server::directoryperdb: true
#mongodb::server::logpath: ""
mongodb::client::package_name: "mongodb-org-shell"

limits:
  '*':
    nofile:
      soft: '100000'
      hard: '100000'
    memlock:
      soft: 'unlimited'
      hard: 'unlimited'
    as:
      soft: 'unlimited'
      hard: 'unlimited'
    nproc:
      soft: '50000'
      hard: '50000'
  'root':
    nofile:
      soft: '100000'
      hard: '100000'
    memlock:
      soft: 'unlimited'
      hard: 'unlimited'
    as:
      soft: 'unlimited'
      hard: 'unlimited'
    nproc:
      soft: '50000'
      hard: '50000'