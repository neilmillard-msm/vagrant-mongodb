---
classes:
  - role::mongodb
mongodb::server::dbpath: '/mnt/mongodb'
mongodb::server::logpath: '/mnt/mongodb/mongod.log'
mongodb::globals::version: "3.2.1-1.el7"
mongodb::server::storage_engine: "wiredTiger"
mongodb::repo::repo_location: 'http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.0/x86_64/'
mongodb::globals::manage_package_repo: true

profile::mongodb_replset::mongodb_replset_name: "%{hiera('mongodb::server::replset')}"
profile::mongodb_replset::domain: "mongodb.internal"
profile::mongodb_replset::members:
  - "x1.%{hiera('profile::mongodb_replset::domain')}:27017"
  - "x2.%{hiera('profile::mongodb_replset::domain')}:27017"
  - "x3.%{hiera('profile::mongodb_replset::domain')}:27017"

mongodb::server::replset: "mongodb"
# cant use syslog and logpath
#mongodb::server::syslog: true
mongodb::server::dbpath: "/var/lib/mongo"
mongodb::server::directoryperdb: true
mongodb::server::logpath: ""
mongodb::client::package_name: "mongodb-org-shell"

limits:
  '*':
    nofile:
      soft: '100000'
      hard: '100000'
    memlock:
      soft: 'unlimited'
      hard: 'unlimited'
    as:
      soft: 'unlimited'
      hard: 'unlimited'
    nproc:
      soft: '50000'
      hard: '50000'
  'root':
    nofile:
      soft: '100000'
      hard: '100000'
    memlock:
      soft: 'unlimited'
      hard: 'unlimited'
    as:
      soft: 'unlimited'
      hard: 'unlimited'
    nproc:
      soft: '50000'
      hard: '50000'